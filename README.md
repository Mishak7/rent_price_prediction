# üè† Rent Price Model API

## üìù –û–ø–∏—Å–∞–Ω–∏–µ
**rent_price_model/** - –ú–æ–¥–µ–ª—å –¥–ª—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –∞—Ä–µ–Ω–¥—ã –∂–∏–ª—å—è

API –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–∞–∫ backend-—Å–µ—Ä–≤–∏—Å:  
–Ω–∞ –≤—Ö–æ–¥ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–≤–∞—Ä—Ç–∏—Ä—ã, –Ω–∞ –≤—ã—Ö–æ–¥–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Ü–µ–Ω–∫—É –∞—Ä–µ–Ω–¥–Ω–æ–π —Ü–µ–Ω—ã.  
–ú–æ–¥–µ–ª—å –æ–±—É—á–µ–Ω–∞ –Ω–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ—Å—Ç-–æ–±—Ä–∞–±–æ—Ç–∫—É –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π –¥–æ—Ä–æ–≥–∏—Ö –∫–≤–∞—Ä—Ç–∏—Ä.

---

## üõ† –°—Ç–µ–∫
- Python 3.11
- FastAPI
- CatBoost
- Pandas / NumPy
- Docker

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
- **rent_price_model/** - –ö–æ—Ä–Ω–µ–≤–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –ø—Ä–æ–µ–∫—Ç–∞
  - **server/** - –°–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å –¥–ª—è inference
    - `api.py` - FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
    - `adapter.py` - Feature engineering –¥–ª—è inference
    - `FlatRawInfo.py` - Pydantic –º–æ–¥–µ–ª—å –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
    - **artifacts/** - –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã —Å train-–¥–∞—Ç–∞—Å–µ—Ç–∞
      - `combo_freq.pkl` - –ß–∞—Å—Ç–æ—Ç—ã –∫–æ–º–±–∏–Ω–∞—Ü–∏–π –ø–ª–æ—â–∞–¥–µ–π –∏ –∫–æ–º–Ω–∞—Ç
      - `area_threshold.pkl` - –ü–æ—Ä–æ–≥ –±–æ–ª—å—à–∏—Ö –ø–ª–æ—â–∞–¥–µ–π
      - `dist_center_median.pkl` - –ú–µ–¥–∏–∞–Ω–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ —Ü–µ–Ω—Ç—Ä–∞
  - **train_and_test/** - –û–±—É—á–µ–Ω–∏–µ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏
    - `features_engineering.py` - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ –¥–ª—è train/test
    - `postprocessing.py` - –ü–æ—Å—Ç-–æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–æ–≥–Ω–æ–∑–æ–≤
    - `config.py` - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
    - `train.py` - –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏
    - `predict.py` - Batch-–ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è
    - `build_artifacts.py` - –°–±–æ—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫ –¥–ª—è inference
  - **model/** - –°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏
    - `catboost_model.pkl` - –°–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–∞—è –º–æ–¥–µ–ª—å CatBoost
  - **data/** - –î–∞–Ω–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç–∞
    - **raw/** - –°—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ (train.xlsx, test.xlsx)
    - **processed/** - –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π
  - `Dockerfile` - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Docker-–æ–±—Ä–∞–∑–∞
  - `requirements.txt` - Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
  - `README.md` - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞

---
## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –º–æ–¥–µ–ª–∏
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∞–Ω—Å–∞–º–±–ª—å –º–æ–¥–µ–ª–µ–π **CatBoost** (5 —Ä–∞–∑–Ω—ã—Ö —Å–∏–¥–æ–≤)
- –û—Ç–±–æ—Ä –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ feature importance –∏ –∏—Ç–µ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
### –ü—Ä–∏–∑–Ω–∞–∫–∏
- –ì–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ: ```lat, lon, dist_center```
- –ü–ª–æ—â–∞–¥—å –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∫–∞: ```total_area, log_area, area_sq, floor_ratio, rooms_count, loggia_count```
- –ö–∞—Ç–µ–≥–æ—Ä–∏–∞–ª—å–Ω—ã–µ: ```renovation, parking, building_type, room_type, city```
- –ò–Ω–∂–µ–Ω–µ—Ä–Ω—ã–µ —Ñ–∏—á–∏: ```rarity_index, flag_big_area, exp, lux_anchor_flag```
### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ **–ø–æ—Å—Ç-–æ–±—Ä–∞–±–æ—Ç–∫–∞**:
- –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –¥–æ—Ä–æ–≥–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤
- —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ –ø–æ –º–µ–¥–∏–∞–Ω–∞–º —É–ª–∏—Ü
- –æ—Ç–¥–µ–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è –ø—Ä–µ–º–∏–∞–ª—å–Ω—ã—Ö –ñ–ö
- –§–∏–Ω–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ –æ–∫—Ä—É–≥–ª—è–µ—Ç—Å—è –¥–æ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —à–∞–≥–∞

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (Docker)

### –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞
```bash
docker build -t rent-price-api .
``` 
### –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
``` bash
docker run -p 8000:8000 rent-price-api
```
## üì§ –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞
### POST /predict
```json
{
  "listing_id": 1,
  "total_area": 64,
  "rooms_count": 2,
  "renovation": "–∫–æ—Å–º–µ—Ç–∏—á–µ—Å–∫–∏–π",
  "parking": "unknown",
  "lat": 60.012384,
  "lon": 30.387463,
  "building_type": "–ú–æ–Ω–æ–ª–∏—Ç–Ω–æ-–∫–∏—Ä–ø–∏—á–Ω—ã–π",
  "room_type": "–∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ",
  "loggia_count": 1,
  "floor": 12,
  "floors_total": 23,
  "city": "–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥",
  "street": "unknown",
  "complex": "–ñ–ö –ûp–±–∏—Ç–∞",
  "description": "–üpo—Å—Ç–æ—Ä–Ωa—è –∫–≤ap—Ç–∏—Ä–∞ –≤ –ñ–ö –ûp–±–∏—Ç–∞. B –∫—É—Ö–Ω–µ –Ω–µ–±–æ–ª—å—à–æ–π –∫—É—Öo–Ω–Ω—ã–π –≥–∞—Ä–Ω–∏—Ç—Ép, xo–ªo–¥–∏–ª—å–Ω–∏–∫, —ç–ªe–∫—Ç—Ä–æ–ø–ª–∏—Ç–∞, CB–ß –∏ c—Ç–∏—Äa–ª—å–Ω–∞—è –º–∞—à–∏–Ω–∞. B—ã—Öo–¥ –Ωa –ø—Äo—Å—Ç–æ—Ä–Ω—ã–π –±–∞–ª–∫o–Ω –∏–∑ –∫—É—Ö–Ω–∏. B –∫o–º–Ω–∞—Ç–∞—Ö –¥–≤–∞ —Ä–∞c–∫–ªa–¥–Ω—ãx –¥–∏–≤a–Ωa, –¥–≤—Éc–øa–ª—å–Ω–∞—è –∫p–æ–≤–∞—Ç—å –∏ –∫—Ä–µc–ªo-–∫—Äo–≤a—Ç—å, —à–∫–∞—Ñ, —Ç—É–º–±—ã, –∂—É—Ä–Ω–∞–ª—å–Ω—ã–π –∏ –ø–∏—Å—å–ºe–Ω–Ω—ã–π —Å—Ço–ª—ã. –ó–∞–∫p—ã—Ç–∞—è —Çe—Ä—Ä–∏—Ço—Ä–∏—è, –≤–∏–¥–µ–æ –Ωa–±–ª—é–¥–µ–Ω–∏–µ, –∫–æ–Ω—Å—ä–µ—Ä–∂, –≤—Ö–æ–¥ –ø–æ –º–∞–≥–Ω–∏—Ç–Ω—ã–º –∫–ª—é—á–∞–º. –í–æ –¥–≤–æ—Ä–µ –¥–µ—Ç—Å–∫–∞—è –ø–ª–æ—â–∞–¥–∫–∞. –†—è–¥–æ–º —Å—É–ø–µ—Ä–º–∞—Ä–∫–µ—Ç –û–∫–µ–π, –¢–¶ –ê–∫–∞–¥–µ–º-–ø–∞—Ä–∫, –ú–∞–∫—Å–∏–¥–æ–º, –î–æ–º–æ–≤–æ–π, –≤—Å–µ –ø–æ–º–µ—â–µ–Ω–∏—è –ø–µ—Ä–≤–æ–≥–æ —ç—Ç–∞–∂–∞ –∑–∞–Ω–∏–º–∞—é—Ç –ø–∞—Ä–∏–∫–º–∞—Ö–µ—Ä—Å–∫–∏–µ, –∞–ø—Ç–µ–∫–∏, –º–∏–Ω–∏-–º–∞—Ä–∫–µ—Ç—ã, –±–∞—Ä—ã, —É—á–µ–±–Ω—ã–µ –∏ —Ä–∞–∑–≤–∏–≤–∞—é—â–∏–µ —Ü–µ–Ω—Ç—Ä—ã. –ù–µ–¥–∞–ª–µ–∫–æ –ê–∫–∞–¥–µ–º–∏—è –°–≤—è–∑–∏, –ü–æ–ª–∏—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç —Å –±–æ–ª—å—à–æ–π —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–µ–π –∏ –ø–∞—Ä–∫–æ–º, –≤ 15 –º–∏–Ω—É—Ç–∞—Ö —Ö–æ–¥—å–±—ã –ù–ò–ò –∏–º. –í—Ä–µ–¥–µ–Ω–∞. –í 7 –º–∏–Ω—É—Ç–∞—Ö —Ö–æ–¥—å–±—ã –æ—Ç –º. –ê–∫–∞–¥–µ–º–∏—á–µ—Å–∫–∞—è, –æ—á–µ–Ω—å –º–Ω–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –∞–≤—Ç–æ–±—É—Å–æ–≤, —Ç—Ä–æ–ª–ª–µ–π–±—É—Å–æ–≤, –º–∞—Ä—à—Ä—É—Ç–Ω—ã—Ö —Ç–∞–∫—Å–∏. –ö/—É –æ–ø–ª–∞—á–∏–≤–∞—é—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ."
}
```
## üì• –ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞
```json
{
  "listing_id": 1,
  "predicted_price": 55000
}
```


